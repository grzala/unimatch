<div class="row">
<div class="col-md-8">
    <% if session[:user_id] == @user.id %>
    <h2>Your Account Details</h2>
    <%= image_tag @user.avatar_url(:display), :class => "user_image" %>
    <p><%= @user.name %></p>
    <p><%= @user.surname %></p>
    <p><%= @user.email %></p>
    <p><%= link_to 'Edit these details', controller: 'user', action: 'edit', id: @user.slug %></p>
    <p><%= link_to 'Edit Choices', controller: 'user', action: 'choose_interests', id: @user.slug %></p>
    <% end %>
    <% if session[:user_id] != @user.id %>
        <p><%= @user.name %></p>
        <p><%= @user.surname %></p>
        <%= image_tag @image_url, :class => "user_image" %>
        <p><%= link_to 'Message me', controller: 'conversation', action: 'message', id: @user.id %></p>
    <% end %>
<div id='calendar-wrapper' style='width: 100%; margin-right:auto; margin-left: auto'>
    <div id='calendar'>
    </div>
</div>
</div>
<div class="col-md-4">
    <h4>Attending Events</h4>
    <h4>In Societies</h4>
</div>
</div>
    
<script>
$(document).ready(function() {

     function render(event, element) {
        console.log("RENDER");
        element.find('.fc-content').append('<div class="fc-separator"></div><p class="fc-description">'+ event.description + '</p></div>');
    }
    
    $('#calendar').fullCalendar({
        header: {
            left: 'prev',
            center: 'title',
            right: 'next',
        },
		defaultView: 'basicWeek',
		height: 500,
        timeFormat: 'H(:mm)', // uppercase H for 24-hour clock
        
        
		
		events: <%= @events_json %>,
		
	    eventRender: render,
    })
    
});
</script>

<% if !@con.nil? %>
    <div class="messages">
        
    </div>
    
    <script>
        var CON_ID = <%= @con.id %>
        $(document).ready(function() {
            $('.messages').messages(CON_ID);
        })
    </script>
<% end %>
